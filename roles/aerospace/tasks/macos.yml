---
- name: Ensure Aerospace is installed
  community.general.homebrew_cask:
    state: present
    name: "nikitabobko/tap/aerospace"
  become: false

- name: Ensure destination directory exists
  ansible.builtin.file:
    path: "{{ lookup('env', 'HOME') }}/.config/aerospace"
    state: directory
    mode: "0755"
  become: false

- name: Link file from role files to local destination
  ansible.builtin.file:
    src: "{{ role_path }}/files/config.toml"
    dest: "{{ lookup('env', 'HOME') }}/.config/aerospace/aerospace.toml"
    state: link
    mode: "0644"
    force: true
    follow: false
  become: false
